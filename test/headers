# value block
{v: 2+2} # 4
aâ†1 â‹„ a+{v: aâ†2 â‹„ bâ†3 â‹„ a} # 3
{v: bâ†5} â‹„ b # err
{2+2} # 4
1+{2+2} # 5
Fâ†{F:â‰¤4} â‹„ 1 # 1

# functions
{    -ğ•©}10 # Â¯10
{ğ•Š  :-ğ•©}10 # Â¯10
{S  :-ğ•©}10 # Â¯10
{ğ•Š ğ•©:-ğ•©}10 # Â¯10
{ğ•Š x:-ğ•©}10 # Â¯10
{S ğ•©:-ğ•©}10 # Â¯10
{S x:-ğ•©}10 # Â¯10
{S x:-x}10 # Â¯10
{  ğ•©:-ğ•©}10 # Â¯10
1{ ğ•©:-ğ•©}10 # err

# 1-modifiers
Ã—Ëœ{        ğ”½âŸ2  } 2 # 16
Ã—Ëœ{        ğ”½âŸ2 ğ•©} 2 # 16
Ã—Ëœ{        ğ”½âŸ2  }   # Ã—ËœâŸ2
Ã—Ëœ{  _r  : ğ”½âŸ2  } 2 # 16
Ã—Ëœ{  _r  : ğ”½âŸ2 ğ•©} 2 # 16
Ã—Ëœ{F _r  : FâŸ2  } 2 # 16
Ã—Ëœ{F _r  : FâŸ2  }   # Ã—ËœâŸ2
Ã—Ëœ{F _r  : FâŸ2 ğ•©} 2 # 16
Ã—Ëœ{F _r ğ•©: FâŸ2  } 2 # Ã—ËœâŸ2
Ã—Ëœ{F _r x: FâŸ2 x} 2 # 16

# 2-modifiers
Ã—Ëœ{           ğ”¾ ğ”½âŸ2  }- 2 # Â¯16
Ã—Ëœ{           ğ”¾ ğ”½âŸ2 ğ•©}- 2 # Â¯16
Ã—Ëœ{           ğ”¾ ğ”½âŸ2  }-   # -Ã—ËœâŸ2
Ã—Ëœ{  _r_    : ğ”¾ ğ”½âŸ2  }- 2 # Â¯16
Ã—Ëœ{  _r_    : ğ”¾ ğ”½âŸ2 ğ•©}- 2 # Â¯16
Ã—Ëœ{F _r_ G  : G FâŸ2  }- 2 # Â¯16
Ã—Ëœ{F _r_ G  : G FâŸ2  }-   # -Ã—ËœâŸ2
Ã—Ëœ{F _r_ G  : G FâŸ2 ğ•©}- 2 # Â¯16
Ã—Ëœ{F _r_ G ğ•©: G FâŸ2  }- 2 # -Ã—ËœâŸ2
Ã—Ëœ{F _r_ G x: G FâŸ2 x}- 2 # Â¯16

_m â† {ğ”½ğ”¾}(1+âŠ¢) â‹„ -_m Ã·_m 24 # Â¯1.04

# invalid tokens
 {v: ğ•©}   # err
{{v: ğ•©}}0 # err
{ S: _ğ•£ } # err
{ S: _ğ•£_} # err
{ S:  ğ”½ } # err
{ S:  ğ”¾ } # err
{_r:  ğ”¾ } # err
{_r: _ğ•£_} # err

# body/header matching
 {ğ•©}10 # 10
1{ğ•©}10 # 10
 {ğ•© ; ğ•¨}10 # 10
1{ğ•© ; ğ•¨}10 # 1
 {2 ; 4}10 # 2
1{2 ; 4}10 # 4

{ 2:4;ğ•©}Â¨â†•4 # 0â€¿1â€¿4â€¿3
{ğ•Š2:4;ğ•©}Â¨â†•4 # 0â€¿1â€¿4â€¿3
{  aâ€¿2:a;  aâ€¿b:b}Â¨"abcd"âˆ¾Â¨â†•4 # 0â€¿1â€¿'c'â€¿3
{S aâ€¿2:a;S aâ€¿b:b}Â¨"abcd"âˆ¾Â¨â†•4 # 0â€¿1â€¿'c'â€¿3
 {ğ•¨ğ•Š0:5 ; 10+ğ•© ; 10+ğ•¨}Â¨â†•2 # 5â€¿11
3{ğ•¨ğ•Š0:5 ; 10+ğ•© ; 10+ğ•¨}Â¨â†•2 # 5â€¿13


 -{ğ”½ğ•© ; ğ•©} 5 # Â¯5
1-{ğ”½ğ•© ; ğ•©} 5 # 5
 -{ğ•© ; ğ”½ğ•©} 5 # 5
1-{ğ•© ; ğ”½ğ•©} 5 # Â¯5


10 -{ ğ”½ğ”¾ }Ã·2 # Â¯5
10 -{ ğ”½ğ”¾ğ•©}Ã·2 # Â¯0.5
10 -{ğ”½ğ•¨ğ”¾ğ•©}Ã·2 # Â¯5
   -{ğ”½ğ•¨ğ”¾ğ•©}Ã·2 # Â¯0.5
10 -{ ğ•—_ğ•£_ğ•˜ : ğ”½ğ”¾}Ã·2 # Â¯5
10 -{ğ•¨ğ•—_ğ•£_ğ•˜ğ•©: ğ”½ğ”¾}Ã·2 # -Ã·
10 -{ ğ•—_ğ•£_ğ•˜ğ•©: ğ”½ğ”¾}Ã·2 # err
10 -{ ğ•—_ğ•£_ğ•˜ : ğ”½ğ”¾ğ•©}Ã·2 # Â¯0.5 # maybe should error?
{ğ”½_ğ•£_1  :1 ; ğ”½_ğ•£_ğ”¾ :2} # err
{ğ”½_ğ•£_1  :1 ; ğ”½_ğ•£_ğ”¾x:2} # err
-{1+ğ•© ; ğ”½ğ”¾ğ•©}Ã·4 # 5
-{ ğ”½ğ•© ; ğ”½ğ”¾ğ•©}Ã·4 # Â¯4


# inverse headers

10{ ğ•Šâ¼ : ğ•¨-ğ•©}â¼1 # 9
  { ğ•Šâ¼ : ğ•¨-ğ•©}â¼1 # Â¯1
10{ğ•¨ğ•Šâ¼ğ•©: ğ•¨-ğ•©}â¼1 # 9
  {ğ•¨ğ•Šâ¼ğ•©: ğ•¨-ğ•©}â¼1 # Â¯1
10{ ğ•Šâ¼ğ•©: ğ•¨-ğ•©}â¼1 # err
  { ğ•Šâ¼ğ•©: ğ•¨-ğ•©}â¼1 # Â¯1

10{ ğ•ŠËœâ¼ : ğ•¨-ğ•©}Ëœâ¼1 # 9
10{ğ•¨ğ•ŠËœâ¼ğ•©: ğ•¨-ğ•©}Ëœâ¼1 # 9
  {ğ•¨ğ•ŠËœâ¼ğ•©: ğ•¨-ğ•©}Ëœâ¼1 # err
  { ğ•ŠËœâ¼ : ğ•¨-ğ•©}Ëœâ¼1 # err
  { ğ•ŠËœâ¼ğ•©: ğ•¨-ğ•©}Ëœâ¼  # err
{ğ•—_ğ•£_ğ•˜ â¼: 3} # err # because immediate
{ğ•—_ğ•£_ğ•˜Ëœâ¼: 3} # err

# TODO modifier inverses


# variable scoping

bâ†1 â‹„ 9{bâ†5 â‹„ b ; bâ€¿ğ•©}2 # 1â€¿2

# bad syntax
{ğ•¨ ğ•Š: 1} # err
{ğ•© ; ğ•© ; ğ•©} # err
{ğ•© ; ğ•Šğ•©:ğ•© ; ğ•©} # err
{ğ•© ; ğ•Šğ•©: ğ•©} # err
{; 2+ğ•©} # err
{: 2+ğ•©} # err
{2+ğ•© ;} # err
{2+ğ•© :} # err
{2+ğ•© ;; 1+ğ•©} # err
{ğ•Šğ•©: ğ•Šğ•©: 4} # err
{ğ•Šğ•©:: 4} # err
{ğ•Šğ•©: } # err
{ğ•Š 1 2: ğ•©} # err
{1 1 ğ•Š 1: ğ•©} # err
{1 ğ•Š 1 1: ğ•©} # err
{1 1: ğ•©} # err

{  1 1 _ğ•£ 1  : ğ•©} â‹„ 1 # 1
{    1 _ğ•£ 1 1: ğ•©} â‹„ 1 # err
{1 1 1 _ğ•£ 1  : ğ•©} â‹„ 1 # err
{  1 1 _ğ•£ 1 1: ğ•©} â‹„ 1 # err
{  1 1 _ğ•£_ 1 1  : ğ•©} â‹„ 1 # 1
{    1 _ğ•£_      : ğ•©} â‹„ 1 # err
{    1 _ğ•£_ 1 1 1: ğ•©} â‹„ 1 # err
{1 1 1 _ğ•£_ 1 1  : ğ•©} â‹„ 1 # err
{  1 1 _ğ•£_ 1 1 1: ğ•©} â‹„ 1 # err
{ğ•¨ ğ•£ ğ•©: ğ•©} â‹„ 1 # err

# {_ğ•£ ğ•©: ğ•©} # err
# {_ğ•£ ğ•©: ğ•©} # err
# {: ğ•©} # err
# {: ğ•©} # err

# bad names
# {ğ•¨ _ğ•£_ ğ•©: ğ•©} # err
# {ğ•— _ğ•£_ ğ•˜: ğ•©} # err
# {ğ•© _ğ•£: ğ•©} # err
# {ğ•˜ _ğ•£: ğ•©} # err
# {ğ•— _ğ•£: ğ•©} # err
# {ğ•˜ _ğ•£_ ğ•˜: ğ•©} # err
# {ğ•— _ğ•£_ ğ•—: ğ•©} # err


# random usage tests

1â€¿1{ğ•—_r 1:0âŠ‘ğ•— ; ğ•—_r 2:1âŠ‘ğ•— ; _r: +Â´ ğ•—_rÂ¨ ğ•©-1â€¿2} 10 # 55
1â€¿1{ğ•—_r 1:0âŠ‘ğ•— ; ğ•—_r 2:1âŠ‘ğ•— ; _r: +Â´ ğ•—_ğ•£Â¨ ğ•©-1â€¿2} 10 # 55
1â€¿1{ğ•—_r 1:0âŠ‘ğ•— ; ğ•—_r 2:1âŠ‘ğ•— ;     +Â´   ğ•ŠÂ¨ ğ•©-1â€¿2} 10 # 55

1â€¿1{ğ•—_r_ğ•˜ 1:0âŠ‘ğ•— ; ğ•—_r_ğ•˜ 2:1âŠ‘ğ•— ; _r_: ğ”¾Â´ ğ•—_ğ•£_ğ•˜Â¨ ğ•©-1â€¿2}+ 10 # 55
1â€¿1{ğ•—_r_ğ•˜ 1:0âŠ‘ğ•— ; ğ•—_r_ğ•˜ 2:1âŠ‘ğ•— ; _r_: ğ”¾Â´ ğ•ŠÂ¨ ğ•©-1â€¿2}+ 10 # 55

2  {âŸ¨a,bâŸ©_rğ•©: aâ€¿bâ¥Šğ•© ; a _rğ•©: aâ€¿a _r ğ•©} 1 # 2â€¿2â¥Š1
2â€¿5{âŸ¨a,bâŸ©_rğ•©: aâ€¿bâ¥Šğ•© ; a _rğ•©: aâ€¿a _r ğ•©} 1 # 2â€¿5â¥Š1
2â€¿5{âŸ¨a,bâŸ©_r: aâ€¿bâŠ¸â¥Š ; a _r: aâ€¿a _r} 1 # err
2â€¿5{âŸ¨a,bâŸ©_r: aâ€¿bâŠ¸â¥Š ; a _r ğ•©: aâ€¿a _r ğ•©} 1 # err # probably

  {âŸ¨ğ•©âŸ©}{ğ”½_r_ğ”¾ ğ•©: ğ”½ğ•© ; ğ•¨ ğ”½_r_ğ”¾ ğ•©: ğ•¨ğ”¾ğ•©}{âŸ¨ğ•¨,ğ•©âŸ©} 2 # âŸ¨2âŸ©
1 {âŸ¨ğ•©âŸ©}{ğ”½_r_ğ”¾ ğ•©: ğ”½ğ•© ; ğ•¨ ğ”½_r_ğ”¾ ğ•©: ğ•¨ğ”¾ğ•©}{âŸ¨ğ•¨,ğ•©âŸ©} 2 # 1â€¿2
  {âŸ¨ğ•©âŸ©}{F _r_ G: {ğ•Šğ•©: Fğ•© ; ğ•¨ğ•Šğ•©: ğ•¨Gğ•©}}{âŸ¨ğ•¨,ğ•©âŸ©} 2 # âŸ¨2âŸ©
1 {âŸ¨ğ•©âŸ©}{F _r_ G: {ğ•Šğ•©: Fğ•© ; ğ•¨ğ•Šğ•©: ğ•¨Gğ•©}}{âŸ¨ğ•¨,ğ•©âŸ©} 2 # 1â€¿2